{%- from "rsyslog/map.jinja" import server with context -%}

##### Modules Import #####

{%- for module in server.get('modules', {}) %}
module(load="{{ module.name }}"
{%- if module.parameter is defined -%}
{%- for name,value in module.parameter.iteritems() %} {{name}}="{{value}}"
{%- endfor -%}
{%- endif -%})
{%- endfor %}

##### Template Descriptions #####
{%- for name,template in server.get('template', {}).iteritems() %}
template(name="{{ name }}" {%- for name,value in template.parameter.iteritems() %} {{name}}="{{value}}"{%- endfor -%})
{%- if template.description is defined -%}{ {{ template.description }} } {%- endif -%}
{%- endfor %}

##### Ruleset Descriptions #####
{%- for name,ruleset in server.get('ruleset', {}).iteritems() %}
ruleset(name="{{ name }}"){
{{ ruleset.description }}
}
{%- endfor %}

##### Input Descriptions #####
{%- for type,parameter in server.get('input', {}).iteritems() %}
input(type="{{ type }}"{%- for name,value in parameter.iteritems() %} {{name}}="{{value}}"{%- endfor -%})
{%- endfor %}
